<?php

################################################################################
# PHP Suchscript - Version 2.5.35                                              #
# copyright webdesign weisshart                                                #
# http://webdesign.weisshart.de                                                #
# dieser copyright Hinweis darf nicht entfernt werden!                         #
#                                                                              #
# Sie koennen dieses Script kostenlos einsetzen,                               #
# solange Sie die Links auf webdesign.weisshart.de unveraendert intakt lassen. #
# Wenn Sie die Links auf webdesign.weisshart.de entfernen wollen,              #
# koennen Sie eine Lizenz erwerben bei                                         #
# http://webdesign.weisshart.de/suchen-lizenz.php                              #
################################################################################

include("search_config.php");

$NCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQNCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQ="Ly8gTmV0dCwgZGFzcyBTaWUgc2ljaCBmdWVyIG1laW5lbiBzb3VyY2Vjb2RlIGludGVyZXNzaWVyZW4uIERlciBMaW5rIGF1ZiB3ZWJkZXNpZ24ud2Vpc3NoYXJ0LmRlIGRhcmYgbnVyIG5hY2ggRXJ3ZXJiIGVpbmVyIExpemVueiBlbnRmZXJudCB3ZXJkZW4hCi8vIEBpbmlfc2V0KCdkaXNwbGF5X2Vycm9ycycsICcxJyk7CgoKc2V0bG9jYWxlIChMQ19DVFlQRSwgJ2RlX0RFJyk7IC8vIHN0cnRvbG93ZXIgYXVjaCBtaXQgVW1sYXV0ZW4gLSBhYmVyIGFuc2NoZWluZW5kIG5pY2h0IHVudGVyIFBIUCA1LjQKCgppZiAoIUBpbmlfZ2V0KCdzYWZlX21vZGUnKSkgQHNldF90aW1lX2xpbWl0KDQ1KTsKJG10aW1lID0gbWljcm90aW1lKCk7ICRtdGltZSA9IGV4cGxvZGUoICcgJywgJG10aW1lKTsgJG10aW1lID0gJG10aW1lWzFdICsgJG10aW1lWzBdOwokc3VjaF9zdGFydCA9ICRtdGltZTsKCiR2ZXJzaW9uPSAnPCEtLSBWZXJzaW9uIDIuNS4zNSAtLT4nOwoKCmlmIChwaHB2ZXJzaW9uKCkgPCAnNC4zLjAnKSB7CgllY2hvICI8cD5EaWVzZXMgU2NyaXB0IGVyZm9yZGVydCBQSFAgVmVyc2lvbiA0LjMuMCBvZGVyIGgmb3VtbDtoZXIhPGJyIC8+IjsKCWVjaG8gImF1ZiBJaHJlbSBTZXJ2ZXIgbCZhdW1sO3VmdCBhYmVyIFBIUCBWZXJzaW9uICIucGhwdmVyc2lvbigpLiIuPC9wPiI7CglleGl0Owp9CgokbWV0aG9kID0gJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ107CgokYXJyYXkgPSAiIjsKJGF1c2dhYmUgPSIiOwokZm91bmQgPSAwOwokZSA9ICIiOwokc29ydGhpbndlaXMgPSAiIjsKJGxpbmsgPSAiIjsKJGR1cmNoc3VjaHQgPSAwOwokYmVyZWl0c19mb3VuZCA9IGFycmF5KCk7IAoKCmlmICghaXNzZXQoJHBsdXJhbCkpewoJJHBsdXJhbCA9ICJuIjsKfQoKLy9pZiAoIWlzc2V0KCRwdW5jdCkpeyRwdW5jdCA9ICJubyI7fQoKaWYgKCFpc3NldCgkbWF4bXNnKSl7CgkkbWF4bXNnID0gMTAwOwp9CgppZiAoIWlzc2V0KCRkYXRlZm9ybSkpewoJJGRhdGVmb3JtID0gImRlIjsKfQoKaWYgKCFpc3NldCgkc3VjaGRhdWVyKSl7Cgkkc3VjaGRhdWVyID0gIlNla3VuZGVuIjsKfQoKaWYgKCFpc3NldCgkYmVzY2hyZWliKSl7CgkkYmVzY2hyZWliID0gIkJlc2NocmVpYnVuZzogIjsKfQoKaWYgKCFpc3NldCgkdHJlZmYpKXsKCSR0cmVmZiA9ICJUcmVmZmVyIjsKfQoKaWYgKCFpc3NldCgkZmlsZWRhdGUpKXsKCSRmaWxlZGF0ZSA9ICJ6dWxldHp0IGdlJmF1bWw7bmRlcnQgYW0gIjsKfQoKaWYgKCFpc3NldCgkbm9yZXN1bHQpKXsKCSRub3Jlc3VsdCA9ICI8cD48YnIgLz5FcyB3dXJkZW4gbGVpZGVyIGtlaW5lIGV4YWt0ZW4gJlV1bWw7YmVyZWluc3RpbW11bmdlbiBtaXQgZGVtIGVpbmdlZ2ViZW5lbiBTdWNoYmVncmlmZiBnZWZ1bmRlbi48YnIgLz5WaWVsbGVpY2h0IHdvbGxlbiBTaWUgZXMgbWl0IGVpbmVtIGFsbGdlbWVpbmVyZW4gU3VjaGJlZ3JpZmYgdmVyc3VjaGVuLjwvcD4iOwp9CgppZiAoIWlzc2V0KCR2b3JzY2hsYWcpKXsKCSR2b3JzY2hsYWcgPSAiT2RlciBTaWUgdmVyc3VjaGVuIGVzIGVpbmZhY2ggbWFsIG1pdCI7Cn0KCmlmICghaXNzZXQoJG1pbmxlbmd0aCkpewoJJG1pbmxlbmd0aCA9ICI8cD48YnIgLz5HZWJlbiBTaWUgYml0dGUgZWluZW4gU3VjaGJlZ3JpZmYgdm9uIG1pbmRlc3RlbnMmbmJzcDsiLiRsZW5ndGguIiZuYnNwO0J1Y2hzdGFiZW4gTCZhdW1sO25nZSBlaW4uPC9wPiI7Cn0KCgoKaWYgKCFpc3NldCgkaWZyYW1lKSl7CiAgICRpZnJhbWU9ZmFsc2U7Cn0KCmlmICghaXNzZXQoJHRhcmdldHdhaGwpKXsKICAgJHRhcmdldHdhaGw9ZmFsc2U7Cn0KCi8vIGlmICghaXNzZXQoJGV4Y2x1ZGVfc3RyaW5ncykpewovLyAgICAkZXhjbHVkZV9zdHJpbmdzID0gYXJyYXkoKTsKLy8gfQoKaWYgKCFpc3NldCgkaW5zdGFsbGF0aW9uX3BhdGgpKSB7CgkkaW5zdGFsbGF0aW9uX3BhdGggPSAid2R3X3N1Y2hlIjsKfQoKaWYgKCFpc3NldCgkZW5jb2RpbmcpKSB7CgkkZW5jb2RpbmcgPSAiSVNPIjsKfQoKaWYgKCFpc3NldCgkdGh1bWJfcmVwbGFjZSkpIHsKCSR0aHVtYl9yZXBsYWNlID0gIl9zcy5qcGciOwp9CgokbGlzdF9oeF9zdGFydCA9ICRsaXN0X2h4X2VuZCA9ICIiOwppZiAoaXNzZXQoJGxpc3RfaHgpICYmIGlzX251bWVyaWMoJGxpc3RfaHgpKSB7CgkkbGlzdF9oeF9zdGFydCA9ICc8aCcuJGxpc3RfaHguJz4nOwoJJGxpc3RfaHhfZW5kICAgPSAnPC9oJy4kbGlzdF9oeC4nPiAnOwp9CgppZiAoIWlzc2V0KCRoeF9zdWNodGlwKSB8fCAhaXNfbnVtZXJpYygkaHhfc3VjaHRpcCApKSB7CgkkaHhfc3VjaHRpcCA9IDM7Cn0KCgoKLy8gdmVyYm90ZW5lIFplaWNoZW4KJGV4Y2x1ZGVfc3RyaW5nc19tZXJnZSA9IGFycmF5KAogICAnXFwnLCAvLyBkYXMgXCBkaWVudCB6dW0gTWFza2llcmVuIHZvbiByZXNlcnZpZXJ0ZW4gWmVpY2hlbiAKCSInIiwKICAgJyonLAoJJ3wnLAogICAnKycKKTsKCi8vICRleGNsdWRlX3N0cmluZ3NfbWVyZ2UgPSBhcnJheV9tZXJnZSgkZXhjbHVkZV9zdHJpbmdzLCAkZXhjbHVkZV9zdHJpbmdzMik7Ci8vICRleGNsdWRlX3N0cmluZ3NfbWVyZ2UgPSAkZXhjbHVkZV9zdHJpbmdzMjsKCgppZiAoaXNzZXQoJHN1Y2h0aXAwKSl7Cgkkc2VhcmNodGlwMCA9ICJcbjxoJGh4X3N1Y2h0aXAgaWQ9J3N1Y2h0aXBoZWFkZXInPiRzdWNodGlwMCA8L2gkaHhfc3VjaHRpcD5cbiI7Cgl9IGVsc2UgewoJJHNlYXJjaHRpcDAgPSAiXG48aCRoeF9zdWNodGlwIGlkPSdzdWNodGlwaGVhZGVyJz5TdWNodGlwcHM6IDwvaCRoeF9zdWNodGlwPlxuIjsKfQoKaWYgKGlzc2V0KCRzdWNodGlwMSkpewoJJHNlYXJjaHRpcDEgPSAiPGxpPiRzdWNodGlwMTwvbGk+XG4iOwoJfSBlbHNlIHsKCSRzZWFyY2h0aXAxID0gIjxsaT5EaWUgU3VjaGUgZmluZGV0IGFsbGUgU2VpdGVuLCBkaWUgSWhyZW4gU3VjaGJlZ3JpZmYgZW50aGFsdGVuIC0gYXVjaCBhbHMgV29ydGJlc3RhbmR0ZWlsLiBFaW5lIFN1Y2hlIG5hY2ggJnJhcXVvO3Rlc3QmbGFxdW87IGZpbmRldCBhbHNvIGF1Y2ggJnJhcXVvO3NwJmF1bWw7PGVtPnRlc3Q8L2VtPmUmbGFxdW87LjwvbGk+IjsKCQp9CgppZiAoaXNzZXQoJHN1Y2h0aXAyKSl7Cgkkc2VhcmNodGlwMiA9ICI8bGk+JHN1Y2h0aXAyPC9saT5cbiI7Cgl9IGVsc2UgewoJJHNlYXJjaHRpcDIgPSAiPGxpPldlbm4gU2llIElocmUgU3VjaGUgYXVmIGdhbnplIFcmb3VtbDtydGVyIGVpbnNjaHImYXVtbDtua2VuIHdvbGxlbiwgZiZ1dW1sO2dlbiBTaWUgdm9yIHVuZCBoaW50ZXIgZGVtIFdvcnQgZWluIExlZXJ6ZWljaGVuIGVpbiwgdW5kIHVtc2NobGllJnN6bGlnO2VuIGFsbGVzIG1pdCBBbmYmdXVtbDtocnVuZ3N6ZWljaGVuLiBCZWlzcGllbDogXCIgdGVzdCBcIi4gJnJhcXVvO3NwJmF1bWw7PGVtPnRlc3Q8L2VtPmUmbGFxdW87IHdpcmQgZGFubiBuaWNodCBtZWhyIGdlZnVuZGVuLiA8L2xpPiI7Cn0KCiRzZWFyY2h0aXAyID0gIiI7CgppZiAoaXNzZXQoJHN1Y2h0aXAzKSl7Cgkkc2VhcmNodGlwMyA9ICI8bGk+JHN1Y2h0aXAzPC9saT5cbiI7Cgl9IGVsc2UgewoJCSRzZWFyY2h0aXAzID0gIjxsaT5XZW5uIFNpZSBtZWhyZXJlIFcmb3VtbDtydGVyIGVpbmdlYmVuLCB3ZXJkZW4gYWxsZSBEb2t1bWVudGUgZ2VmdW5kZW4sIGRpZSA8ZW0+YWxsZTwvZW0+IGVpbmdlZ2ViZW5lbiBXJm91bWw7cnRlciBlbnRoYWx0ZW4sIGVnYWwgaW4gd2VsY2hlciBSZWloZW5mb2xnZSAoQU5ELVZlcmtuJnV1bWw7cGZ1bmcpLgoJCTxiciAvPjxlbT5KZSBtZWhyIFcmb3VtbDtydGVyLCBkZXN0byB3ZW5pZ2VyIFRyZWZmZXIuPC9lbT48L2xpPiI7Cn0KCQkKaWYgKGlzc2V0KCRzdWNodGlwMzEpKXsKCSRzZWFyY2h0aXAzMSA9ICI8bGk+JHN1Y2h0aXAzMTwvbGk+XG4iOwoJfSBlbHNlIHsKCSRzZWFyY2h0aXAzMSA9CSI8bGk+V2VubiBTaWUgbWVocmVyZSBXJm91bWw7cnRlciBcIm1pdCBBbmYmdXVtbDtocnVuZ3N6ZWljaGVuIHVtc2NobGllJnN6bGlnO2VuXCIsIHdlcmRlbiBhbGxlIERva3VtZW50ZSBnZWZ1bmRlbiwgZGllIGFsbGUgZWluZ2VnZWJlbmVuIFcmb3VtbDtydGVyIGV4YWt0IGluIGRlciBlaW5nZWdlYmVuZW4gV2Vpc2UgZW50aGFsdGVuLjwvbGk+IjsKfQoKaWYgKGlzc2V0KCRzdWNodGlwM29yKSl7Cgkkc2VhcmNodGlwM29yID0gIjxsaT4kc3VjaHRpcDNvcjwvbGk+XG4iOwp9CgoKaWYgKCFpc3NldCgkd2VpdGVydHh0KSl7Cgkkd2VpdGVydHh0ID0gIndlaXRlcmUgVHJlZmZlciB6ZWlnZW4iOwp9CmlmICghaXNzZXQoJHp1cnVlY2t0eHQpKXsKCSR6dXJ1ZWNrdHh0ID0gInZvcmhlcmlnZSBUcmVmZmVyIjsKfQoKCmlmICghaXNzZXQoJHNlYXJjaCkpIHskc2VhcmNoID0gJHZhbHVlO30KCmlmICghaXNzZXQoJHNob3dfZXh0KSkgeyRzaG93X2V4dCA9IHRydWU7fQoKaWYgKCFpc3NldCgkcHJvdCkpIHskcHJvdCA9ICJodHRwOi8vIjt9CgoKCgoKCiRzZWFyY2h0aXA0ID0gIiI7CmlmICgkanVtcCA9PSB0cnVlICYmICR0YXJnZXQgPT0gIiIpIHsKCglpZiAoaXNzZXQoJHN1Y2h0aXA0KSl7CgkJJHNlYXJjaHRpcDQgPSAiPGxpPiRzdWNodGlwNDwvbGk+XG4iOwoJCX0gZWxzZSB7CgkJJHNlYXJjaHRpcDQgPSAiPGxpPkZhbGxzIGRpZSBTdWNoZSBudXIgZWluZW4gZWluemlnZW4gVHJlZmZlciBlcmdpYnQsIHdpcmQgZGllIFRyZWZmZXJzZWl0ZSBkaXJla3QgYW5nZXNwcnVuZ2VuLjwvbGk+XG4iOwoJfQp9CgovLyAkdWxzdGFydCA9ICIkc2VhcmNodGlwMDxkaXYgaWQ9J3N1Y2h0aXBwcycgIGNsYXNzPSdrbGFwcGVuJyA+XG48dWw+XG4iOwovLyAkdWxlbmQgPSAiPC91bD5cbjwvZGl2PlxuIjsKLy8KLy8gaWYgKCR0aXBwcykgeyRzZWFyY2h0aXAgPSAkdWxzdGFydC4kc2VhcmNodGlwMS4kc2VhcmNodGlwMi4kc2VhcmNodGlwMy4kc2VhcmNodGlwMzEuJHNlYXJjaHRpcDNvci4kc2VhcmNodGlwNC4kdWxlbmQ7IH1lbHNlIHskc2VhcmNodGlwID0iIjt9CgovLyBiZyBmdWVyIENyZWRpdC1MaW5rOgppZiAoIWlzc2V0KCRiZykpICRiZyA9ICIjRkZGRkZGIjsKaWYgKHN0cnBvcygkYmcsJyMnKSA9PT0gZmFsc2UpICRiZyA9ICcjJy4kYmc7CgppZiAocHJlZ19tYXRjaCgnL14jWzAtOUEtRl17MSw2fSQvaScsICRiZykgJiYgc3RybGVuKCRiZykgPT0gNykgewoKICAgICAgJHJlZEggPSBiYXNlX2NvbnZlcnQoc3Vic3RyKCRiZywgMSwgMiksIDE2LCAxMCk7CiAgICAgICRncmVlbkggPSBiYXNlX2NvbnZlcnQoc3Vic3RyKCRiZywgMywgMiksICAxNiwgMTApOwogICAgICAkYmx1ZUggPSBiYXNlX2NvbnZlcnQoc3Vic3RyKCRiZywgNSwgMiksICAxNiwgMTApOwoKICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvQUVSVCNjb2xvci1jb250cmFzdAogICAgICAkc3VtID0gJHJlZEgqMjk5ICsgJGdyZWVuSCo1ODcgKyAkYmx1ZUgqMTE0OwogICAgICBpZiAoJHN1bSA8IDEyNzAwMCApIHsKICAgICAgICAgICAkY29tcCA9ICIjRkZGRkZGIjsKICAgICAgfSBlbHNlIHsKICAgICAgICAgICAkY29tcCA9IiMwMDAwMDAiOwogICAgICB9Cn0gZWxzZSB7CiAgICAgICRmZWhsZXIgPSAxOwogICAgICAkYmcgPSAiI0ZGRkZGRiI7CiAgICAgICRjb21wID0gIiMwMDAwMDAiOwp9Cgokd2R3ID0gJzxwIHN0eWxlPSJkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnQ7IGZvbnQtc2l6ZTogMTBweCAhaW1wb3J0YW50OyBjb2xvcjonLiRjb21wLicgIWltcG9ydGFudDsgYmFja2dyb3VuZDonLiRiZy4nICFpbXBvcnRhbnQiPiZuYnNwO3NjcmlwdCZuYnNwOyZjb3B5OyZuYnNwOzIwMjEmbmJzcDtieSZuYnNwOzxhIHN0eWxlPSJjb2xvcjonLiRjb21wLicgIWltcG9ydGFudDsgZGlzcGxheTppbmxpbmUgIWltcG9ydGFudDsgZm9udC1zaXplOiAxMHB4ICFpbXBvcnRhbnQ7IGZvbnQtd2VpZ2h0Om5vcm1hbCAhaW1wb3J0YW50OyB0ZXh0LWRlY29yYXRpb246bm9uZSAhaW1wb3J0YW50IiBocmVmPSJodHRwczovL3dlYmRlc2lnbi53ZWlzc2hhcnQuZGUiPndlYmRlc2lnbiZuYnNwO3dlaXNzaGFydDwvYT48L3A+JzsKCgppZiAoaXNzZXQoJHB3ZCkpIHsKCSRzZXJ2ZXIgPSBzdHJfcmVwbGFjZSAoInd3dy4iLCIiLCAkX1NFUlZFUlsnU0VSVkVSX05BTUUnXSApOwoJJHNlcnZlciA9IHN0cl9yZXBsYWNlICgiKyIsIiIsICRzZXJ2ZXIpOwoJJHNlcnZlciA9IHN0cl9yZXBsYWNlICgiLSIsIiIsICRzZXJ2ZXIpOwoJJGRvbSA9IGNyYzMyKCRzZXJ2ZXIpOwogICAgICAkY2hhdmUgPSAkcHdkIC8gc3ByaW50ZigiJXUiLCAkZG9tKTsKfQppZiAoaXNzZXQoJGNoYXZlKSAmJiAkY2hhdmUgPT0gIjMyMSIpewoJJHdkdyA9Jyc7Cn0KCgovLyBuZXVlcyBGZW5zdGVyCmVjaG8nCjxzY3JpcHQ+Ci8qIDwhW0NEQVRBWyAqLwoKZnVuY3Rpb24gbGlua29wZW5lcihhKSB7CiAgIHZhciBiPWE/Il9ibGFuayI6Il9zZWxmIjsKICAgdmFyIGM9ZG9jdW1lbnQubGlua3M7CiAgIGZvcih2YXIgaT0wO2k8Yy5sZW5ndGg7aSsrKSB7CiAgIAkvLyBudXIgU3VjaHRyZWZmZXI6CiAgIAlpZiAoY1tpXS50b1N0cmluZygpLmluZGV4T2YoIm5leHQiKSA9PSAtMSAmJiBjW2ldLnRvU3RyaW5nKCkuaW5kZXhPZigiP3E9IikgPiAtMSApIHsKICAgICAgCQljW2ldLnRhcmdldD1iOwogICAJfQogICB9Cn0KCmZ1bmN0aW9uIGxpbmtjb29raWUoKSB7CiAgIGlmKGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKCJzdWNob2VmZm5lbiIpICE9PSAtMSl7CiAgICAgIGRvY3VtZW50LmNvb2tpZSA9ICJzdWNoPTA7cGF0aD0vO2V4cGlyZXM9VGh1LCAwMS1KYW4tNzAgMDA6MDA6MDEgR01UIjsKICAgfSBlbHNlIHsKICAgICBkb2N1bWVudC5jb29raWU9InN1Y2g9c3VjaG9lZmZuZW47IHBhdGggPS8iOwogICB9Cn0KCmZ1bmN0aW9uIGFkZEV2ZW50KG9iaiwgZXZUeXBlLCBmbil7CiBpZiAob2JqLmFkZEV2ZW50TGlzdGVuZXIpewogICBvYmouYWRkRXZlbnRMaXN0ZW5lcihldlR5cGUsIGZuLCBmYWxzZSk7CiAgIHJldHVybiB0cnVlOwogfSBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpewogICB2YXIgciA9IG9iai5hdHRhY2hFdmVudCgib24iK2V2VHlwZSwgZm4pOwogICByZXR1cm4gcjsKIH0gZWxzZSB7CiAgIHJldHVybiBmYWxzZTsKIH0KfQoKLyogXV0+ICovCjwvc2NyaXB0PgonOwoKCmlmKGlzc2V0KCRfR0VUWyJxIl0pIHx8IGlzc2V0KCRfUE9TVFsicSJdKSkgewoJCglpZiAoaXNzZXQoJF9HRVRbInEiXSkgJiYgJF9HRVRbInEiXSAhPSAiIikgJHNlYXJjaCA9IHN0cmlwc2xhc2hlcygkX0dFVFsicSJdKTsKCWlmIChpc3NldCgkX1BPU1RbInEiXSkgJiYgJF9QT1NUWyJxIl0gIT0gIiIpICRzZWFyY2ggPSBzdHJpcHNsYXNoZXMoJF9QT1NUWyJxIl0pOwoKCSRnYW56ZXJhdXNkcnVjayA9ICRzZWFyY2g7CglpZiAoc3RyaXN0cigkc2VhcmNoLCAiQ29udGVudC1UeXBlIikpJHNlYXJjaCA9ICJubyBzcGFtIGhlcmUhIjsKCgoJaWYgKHN0cnBvcyhzdHJ0b2xvd2VyKCRlbmNvZGluZyksInV0ZiIpIT09IGZhbHNlKSB7Ci8vCQllY2hvICJ1dGYtODoiOwoJCSRzZWFyY2ggPSBodG1sc3BlY2lhbGNoYXJzKCRzZWFyY2gsIEVOVF9OT1FVT1RFUywgIlVURi04Iik7Cgl9IGVsc2UgewovLwkJZWNobyAiSVNPOiI7CgkJJHNlYXJjaCA9IGh0bWxzcGVjaWFsY2hhcnMoJHNlYXJjaCwgRU5UX05PUVVPVEVTLCAiSVNPLTg4NTktMTUiKTsKCX0KCgoKCWZvcmVhY2goJGV4Y2x1ZGVfc3RyaW5nc19tZXJnZSBhcyAkaykgewoJCSRnZXN1Y2h0ID0gc3RyX3JlcGxhY2UoJGssIiIsJHNlYXJjaCk7CgoJCS8qIHdlbm4gZXhjbHVkZWQgc3RyaW5ncyBpbSBTdWNoYmVncmlmZiwgdW5kIGRhZHVyY2ggU3VjaGJlZ3JpZmYga2xlaW5lciBhbHMgJGxlbmd0aCB3aXJkOiAqLwoJCWlmIChzdHJsZW4odHJpbSgkc2VhcmNoKSkgPiBzdHJsZW4odHJpbSgkZ2VzdWNodCkpICYmIHN0cmxlbih0cmltKCRzZWFyY2gpKSA+PSAkbGVuZ3RoICkgewoJCQkkbWlubGVuZ3RoID0gJG5vcmVzdWx0OyAKCQl9Cgl9CgkJCgkvLyBnYW56ZSBBdXNkcnVlY2tlIHN1Y2hlbjoKCSRhdXNkcnVjayA9IGZhbHNlOwoJaWYgKHN0cnBvcygkZ2FuemVyYXVzZHJ1Y2ssJyInKSAhPT0gZmFsc2UgfHwgc3RycG9zKCRnYW56ZXJhdXNkcnVjaywiJyIpICE9PSBmYWxzZSApIHsgCgkJJGF1c2RydWNrID0gdHJ1ZTsKCX0gCgkKCgkkc2VhcmNoID0gcHJlZ19yZXBsYWNlKCcvWyBdezIsfS9zbScsICcgJywgJHNlYXJjaCk7CgoKCWlmIChmaWxlX2V4aXN0cygic2VhcmNoX3JlcGxhY2UucGhwIikpIHtpbmNsdWRlICgic2VhcmNoX3JlcGxhY2UucGhwIik7fQoKCS8vIHVuZXJ3dWVuc2NodGUgU3RyaW5ncyB2b24gZGVyIFN1Y2hlIGF1c3NjaGxpZXNzZW4KCWZvcmVhY2goJGV4Y2x1ZGVfc3RyaW5nc19tZXJnZSBhcyAkaykgewoJCSRzZWFyY2ggPSBzdHJfcmVwbGFjZSgkaywiIiwkc2VhcmNoKTsKCX0KCgoJJHNlYXJjaCA9IHRyaW0oJHNlYXJjaCk7Cgkkc2VhcmNoID0gc3RyX3JlcGxhY2UgKCAnJmFtcDsnLCAnJicsICRzZWFyY2ggKTsgLy8gbGFlc3N0IGh0bWwgZW50aXRpZXMgd2llICYjMzUxOyB6dSAoei5CLiB0dWVya2lzY2hlIFNvbmRlcnplaWNoZW4pCgkvL2RpZSBnbGVpY2hlIFplaWxlIGF1Y2ggaW4gZGllIHN1Y2hlbi5waHAsIGF1c3NlcmRlbSBaZWlsZSA0OCBoaWVyIHdlZ2tvbW1lbnRpZXJlbi4KCgoJaWYoZW1wdHkoJHNlYXJjaCkpIHskc2VhcmNoPSIiO30KCSRzZWFyY2hsZW5ndGggPSBzdHJfcmVwbGFjZSgnJnF1b3Q7JywnJywkc2VhcmNoKTsKCWlmKHN0cmxlbigkc2VhcmNobGVuZ3RoKSA+PSAkbGVuZ3RoICYmICRzZWFyY2ggIT0gJHZhbHVlKSB7CgoJaWYgKCFpc3NldCgkc3VjaGhpbndlaXMpIHx8ICAkc3VjaGhpbndlaXMgPT0gIiIpIHsKCQkkc2VhcmNoaGlud2VpcyA9ICJTaWUgc3VjaGVuIG5hY2giOwoJfSBlbHNlIHsKCQkkc2VhcmNoaGlud2VpcyA9ICRzdWNoaGlud2VpczsKCQllY2hvICc8cD4nLiRzZWFyY2hoaW53ZWlzLicgPGVtPiZyYXF1bzsnLiRnZXN1Y2h0LicmbGFxdW87PC9lbT4nOwoJfQoKCS8vIGRpZSBGdW5rdGlvbiB6dW0gZXh0cmFoaWVyZW4gdm9uIFRlaWxzdHJpbmdzCglmdW5jdGlvbiBhdXNsZXNlbigkYWxsLCAkc3RhcnQsICRlbmQpIHsKCQlpZiAoc3RyaXN0cigkYWxsLCRzdGFydCkpIHsKCQkJJHN0YXJ0X3Bvcz1zdHJwb3Moc3RydG9sb3dlcigkYWxsKSxzdHJ0b2xvd2VyKCRzdGFydCkpICsgc3RybGVuKCRzdGFydCk7CgkJCSRyZXN0ID0gc3Vic3RyKCRhbGwsJHN0YXJ0X3Bvcyk7CgkJCSRlbmRfcG9zPXN0cnBvcyhzdHJ0b2xvd2VyKCRyZXN0KSxzdHJ0b2xvd2VyKCRlbmQpKTsKCQkJJGVyZyA9IHN1YnN0cigkcmVzdCwwLCRlbmRfcG9zKTsKCQkJcmV0dXJuICRlcmc7CgkJfQoJfQoKCgkvLyBkaWUgRnVua3Rpb24genVtIER1cmNoc3VjaGVuIGRlcyBWZXJ6ZWljaG5pc2JhdW1zOgoJaWYgKCFpc3NldCgkZXhjbHVkZV9kaXJzKSkgJGV4Y2x1ZGVfZGlycyA9IGFycmF5KCIiKTsKCglmdW5jdGlvbiB0cmVlKCRvcmRuZXIsICRzdWIgPSBGQUxTRSkgewoJCWdsb2JhbCAkZXJnZWI7CgkJJGhhbmRsZSA9IG9wZW5kaXIoJG9yZG5lcik7CgkJd2hpbGUgKGZhbHNlICE9PSAoJGZpbGUgPSByZWFkZGlyICgkaGFuZGxlKSkpIHsKCQkJaWYoJGZpbGUgIT0gIi4iICYmICRmaWxlICE9ICIuLiIgJiYgaXNfZGlyKCRvcmRuZXIuIi8iLiRmaWxlKSkgewoJCQkJJGNvbXBsID0gJG9yZG5lci4iLyIuJGZpbGUuIi8iOwoJICAgICAgIAkJJGVyZ2ViID0gJGVyZ2ViLiIsIi4kY29tcGw7CiAgICAgICAgCQl0cmVlKCRvcmRuZXIuIi8iLiRmaWxlLCBUUlVFKTsKCQkJfQoJCX0KCSAgCWNsb3NlZGlyKCRoYW5kbGUpOwoJfQoKCWlmICgkYWxsZWRpcnMpIHsKCSAgIHRyZWUoIi4iKTsKCSAgICRlcmdlYiA9ICIuLyIuJGVyZ2ViOwoJICAgJGRpcnMgPSBleHBsb2RlICgiLCIsICRlcmdlYik7Cgl9CgoJZm9yZWFjaCgkZGlycyBhcyAkZGlyKSB7CgkJaWYoIWluX2FycmF5KCRkaXIsJGV4Y2x1ZGVfZGlycykpIHsKCQkkdmVyeiA9IG9wZW5kaXIoJGRpcik7CgoJCXdoaWxlKCRmaWxlID0gcmVhZGRpcigkdmVyeikpIHsKCgkJaWYoJGZpbGUgIT0gIi4iICYmICRmaWxlICE9ICIuLiIgJiYgJGZpbGUgIT0gIi5odGFjY2VzcyIpIHsKCgkJJGR1cmNoc3VjaHQgPSAkZHVyY2hzdWNodCArIDE7CgkJLy8gZWluemVsbmUgRGF0ZWllbiB2b24gZGVyIFN1Y2hlIGF1c3NjaGxpZXNzZW4KCQkvLyBkaWUgZm9sZ2VuZGVuIDggWmVpbGVuIGVybGF1YmVuIEF1c2NobHVzcyB2b24gU3Vic3RyaW5ncyBpbiAkZXhjbHVkZV9maWxlcwoJCSRub2xpc3Q9ZmFsc2U7CgkJZm9yICgkZT0wOyRlPGNvdW50KCRleGNsdWRlX2ZpbGVzKTskZSsrKSB7CgkJCSRwb3MgPSBzdHJwb3MoJGZpbGUsJGV4Y2x1ZGVfZmlsZXNbJGVdKTsKCQkJaWYgKCRwb3MgIT09IGZhbHNlKSB7CgkJCQkkbm9saXN0ID0gdHJ1ZTsKCQkJfQoJCX0gCgkJCgkJaWYoJG5vbGlzdCAhPT0gdHJ1ZSAmJiBwcmVnX21hdGNoKCI9KFwuJGRhdF90eXBlKSQ9IiwkZmlsZSkpIHsKCgkJCS8vIE1ldGEtQW5nYWJlbiBlcm1pdHRlbG4KCQkJJHRpdGVsID0gIiI7CgkJCSRrZXl3b3JkcyA9ICIiOwoJCQkkZGVzY3JpcHRpb24gPSAiIjsKCQkJJGdtdGFycmF5PWdldF9tZXRhX3RhZ3MoJGRpci4kZmlsZSk7CgkJCQkKCQkJZm9yZWFjaCAoJGdtdGFycmF5IGFzICRrZXkxID0+ICR2YWwpIHsKCQkJLy8gd2hpbGUobGlzdCgka2V5MSwkdmFsKT1lYWNoKCRnbXRhcnJheSkpewoJCQkJc3dpdGNoKHN0cnRvbG93ZXIoJGtleTEpKXsKCQkJCQljYXNlICJ0aXRsZSI6ICR0aXRlbD0kdmFsOyBicmVhazsKCQkJCQljYXNlICJrZXl3b3JkcyI6ICRrZXl3b3Jkcz0kdmFsOyBicmVhazsKCQkJCQljYXNlICJkZXNjcmlwdGlvbiI6ICRkZXNjcmlwdGlvbj0kdmFsOyBicmVhazsKCQkJCX0KCQkJfQoKCQkJJHN0cmluZzEgPSAkc3RyaW5nID0gZmlsZV9nZXRfY29udGVudHMoJGRpci4kZmlsZSk7CgkJCQkKCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCImbmJzcDsiLCIgIiwkc3RyaW5nKTsgLy8gd2VpbCBzb25zdCAmbHQ7Jm5ic3A7IGFscyBsaW1pdC1lbmQgd2lya3Q/Pz8KCQkJCgkJCSRzdHJpbmcgPSBwcmVnX3JlcGxhY2UoJyNbXHNdezIsfSNzJywgJyAnLCAkc3RyaW5nKTsgLy8gbWVocmVyZSBMZWVyemVpY2hlbiBpbiBlaW5zIHVtd2FuZGVsbgoJCQkKCQkJLy8gd2VpbCBhbnNvbnN0ZW4gZWluICZsdDsgaW0gUXVlbGx0ZXh0IGRlbiBTdWNoYmVyZWljaCBiZWVuZGV0OgoJCQkkc3RyaW5nID0gc3RyX3JlcGxhY2UoIiZsdDsiLCIiLCRzdHJpbmcpOwoJCQkKCQkJaWYgKGZpbGVfZXhpc3RzKCJ0YXJnZXRfcmVwbGFjZS5waHAiKSkge2luY2x1ZGUgKCJ0YXJnZXRfcmVwbGFjZS5waHAiKTt9CgkJCQoJCgkJCS8vIGRhbWl0IHdlcmRlbiBnYW56ZSBXb2VydGVyIGdlZnVuZGVuLCBhdWNoIHdlbm4gc2llIGluIFRhZ3MgZWluZ2VzY2hsb3NzZW4gc2luZDoKCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCI8IiwiIDwiLCRzdHJpbmcpOwoJCQkkc3RyaW5nID0gc3RyX3JlcGxhY2UoIj4iLCI+ICIsJHN0cmluZyk7CgoJCQkvLyBodG1sIHRhZ3MgbWl0IGVpbmdlc2NobG9zc2VuZW4gcGhwIHRhZ3MgcmF1cyAtIHdlaWwgc29uc3QgZWluIGVpbnplbG5lcyA8IG9kZXIgJmx0OyBhbHMgZW5kIHdpcmt0CiAgCQkJJHN1Y2htdXN0ZXIgPSAiLzxcP1tePl0rXD8+LyI7IAogIAkJCSRzdHJpbmcgPSBwcmVnX3JlcGxhY2UoJHN1Y2htdXN0ZXIsIiIsJHN0cmluZyk7CgoKLy9lY2hvICRlbmNvZGluZzsKCQkJaWYgKHN0cnBvcyhzdHJ0b2xvd2VyKCRlbmNvZGluZyksInV0ZiIpIT09IGZhbHNlKSB7CgkJCQkkc3RyaW5nID0gaHRtbF9lbnRpdHlfZGVjb2RlKCRzdHJpbmcsIEVOVF9OT1FVT1RFUywgIlVURi04Iik7CgkJCX0gZWxzZSB7CgkJCQkkc3RyaW5nID0gaHRtbF9lbnRpdHlfZGVjb2RlKCRzdHJpbmcsIEVOVF9OT1FVT1RFUywgIklTTy04ODU5LTEiKTsKCQkJfQogICAgICAgICAgICAJLy8gbnVyIGZ1ZXIgd2R3IGR5bi4gZGVzY3JpcHRpb25zOgogICAgICAgICAgICAJaWYgKCRfU0VSVkVSWydTRVJWRVJfTkFNRSddID09ICJ3ZWJkZXNpZ24ud2Vpc3NoYXJ0LmRlIikgewogICAJCQkJaWYgKCRkZXNjcmlwdGlvbiA9PSAiIil7CiAgIAkJCQkJJGRlc2NyaXB0aW9uID0gYXVzbGVzZW4oJHN0cmluZzEsICJkZXNjcmlwdGlvbiIsICciOycpOwoJCQkJCSRkZXNjcmlwdGlvbiA9IHN0cmlwX3RhZ3MoJGRlc2NyaXB0aW9uKTsKCQkJCQkkZGVzY3JpcHRpb24gPSBwcmVnX3JlcGxhY2UoIi9cbnxccnxjb250ZW50fFwifD18XC98XD8vIiwgIiIsICRkZXNjcmlwdGlvbik7CiAgIAkJCQl9CiAgICAgICAgICAgIAl9CgoJCQkvLyB1bmQgd2VpbCA8dGl0bGU+IG5pY2h0IGltbWVyIGFscyBNZXRhLXRhZyBjb2RpZXJ0IHdpcmQ6CgkJCWlmICgkdGl0ZWwgPT0gIiIpICR0aXRlbCA9IGF1c2xlc2VuKCRzdHJpbmcsICI8dGl0bGU+IiwgIjwvdGl0bGU+Iik7CgoJCQkvLyB3ZWlsIGVzIExldXRlIGdpYnQsIGRpZSBtZXRhIFRhZ3MgbWl0IFplaWxlbnVtYnJ1Y2ggc2NocmVpYmVuOgoJCQkkZGVzY3JpcHRpb24gPSBzdHJfcmVwbGFjZSgiXG4iLCIiLCRkZXNjcmlwdGlvbik7CgkJCSRrZXl3b3JkcyA9IHN0cl9yZXBsYWNlKCJcbiIsIiIsJGtleXdvcmRzKTsKCQkJJHRpdGVsID0gc3RyX3JlcGxhY2UoIlxuIiwiIiwkdGl0ZWwpOwoKCQkJLy8gRGF0ZWllbiBudXIgendpc2NoZW4gZGVuIGJlaWRlbiBsaW1pdGVyIHRhZ3MgYXVzd2VydGVuOgoJCQlpZiAoJGxpbWl0X3N0YXJ0ICE9ICIiKSB7CgkJCQkvLyBXdXJkZSBuZWVkbGUgbmljaHQgZ2VmdW5kZW4sIGdpYnQgc3RycG9zKCkgZGVuIGJvb2xlYW4tV2VydCBGQUxTRSB6dXLDg8K8Y2suCgkJCQlpZiAoc3RycG9zKHN0cnRvbG93ZXIoJHN0cmluZyksc3RydG9sb3dlcigkbGltaXRfc3RhcnQpKSAhPT0gZmFsc2UpIHsKCQkJCQkkcG9zPXN0cnBvcyhzdHJ0b2xvd2VyKCRzdHJpbmcpLHN0cnRvbG93ZXIoJGxpbWl0X3N0YXJ0KSkgKyBzdHJsZW4oJGxpbWl0X3N0YXJ0KTsKCQkJCQkkc3Vic3RyaW5nX3Jlc3QgPSBzdWJzdHIoJHN0cmluZywkcG9zKTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGlzc2V0KCRsaW1pdF9vbmx5KSAmJiAkbGltaXRfb25seSA9PT0gdHJ1ZSkgeyRzdWJzdHJpbmdfcmVzdCA9ICIiO30gLy9kYW1pdCBicmljaHQgZGllIFN1Y2hlIGFiLCB3ZW5uICRsaW1pdF9zdGFydCBuaWNodCBnZWZ1bmRlbiB3aXJkLgoJCQkJCWVsc2UgeyRzdWJzdHJpbmdfcmVzdCA9ICRzdHJpbmc7fQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJJHN1YnN0cmluZ19yZXN0ID0gJHN0cmluZzsKCQkJfQoKCQkJLy8gd2VubiAkbGltaXRfZW5kIGdlc2V0enQ6CgkJCWlmICgkbGltaXRfZW5kICE9ICIiKSB7CgkJCQkkZW5kX3Bvcz1zdHJwb3Moc3RydG9sb3dlcigkc3Vic3RyaW5nX3Jlc3QpLHN0cnRvbG93ZXIoJGxpbWl0X2VuZCkpOwoJCQkJaWYgKCRlbmRfcG9zICE9PSBmYWxzZSkgewoJCQkJCSRzdHJpbmcgPSBzdWJzdHIoJHN1YnN0cmluZ19yZXN0LDAsJGVuZF9wb3MpOwoJCQkJfSBlbHNlIHsKCQkJCQkkc3RyaW5nID0gJHN1YnN0cmluZ19yZXN0OwoJCQkJfQogICAgICAgICAgICAgCX0gZWxzZSB7CgkJCQkkc3RyaW5nID0gJHN1YnN0cmluZ19yZXN0OwogICAgICAgICAgICAgCX0KCgoJCQkvL0luaGFsdCB2b24gdGFncyBhdXN3ZXJ0ZW46CgkJCWlmICgkdGFncz09PWZhbHNlKSAJJHN0cmluZyA9IHN0cmlwX3RhZ3MoJHN0cmluZyk7CgoJCQkvLyBkaWUgbWV0YSB0YWdzIGluIGRpZSBTdWNoZSBlaW5zY2hsaWVzc2VuIGdlbWFlc3MgY29uZmlnOgogICAgICAgICAgICAJaWYgKCR0YWdzID09PSB0cnVlKSB7JGtleT10cnVlOyAkZGVzYz10cnVlOyAkdGl0PXRydWU7fQoJCQlpZiAoJGtleSA9PT0gdHJ1ZSkgJHN0cmluZz0kc3RyaW5nLiRrZXl3b3JkczsKCQkJaWYgKCRkZXNjID09PSB0cnVlKSAkc3RyaW5nPSRzdHJpbmcuJGRlc2NyaXB0aW9uOwoJCQlpZiAoJHRpdCA9PT0gdHJ1ZSkgJHN0cmluZz0kc3RyaW5nLiR0aXRlbDsKCgkJCSRzdHJpbmcgPSBzdHJfcmVwbGFjZSgiXG4iLCAiICIsICRzdHJpbmcpOwoKCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCJ0aXRsZT4iLCAiIiwgJHN0cmluZyk7IC8vIHdlbm4gVHJlZmZlciBpbiA8dGl0bGU+IHdpcmQgdGl0bGU+IGFuZ2V6ZWlndD8KCgkJCQoJCQkvLyB1bmVyd3VlbnNjaHRlIFN0cmluZ3Mgdm9uIGRlciBTdWNoZSBhdXNzY2hsaWVzc2VuCgkJCWZvcmVhY2goJGV4Y2x1ZGVfc3RyaW5nc19tZXJnZSBhcyAkaykgewoJCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCRrLCIiLCRzdHJpbmcpOwoJCQl9CQkJCgoKICAgICAgICAgICAJCS8vIEUtTWFpbHMgcmF1czogaHR0cDovL3d3dy5yZWd1bGFyLWV4cHJlc3Npb25zLmluZm8vZW1haWwuaHRtbAogICAgICAgICAgICAJJHN1Y2htdXN0ZXIgPSAnL1xiW0EtWjAtOS5fJSstXStAW0EtWjAtOS4tXStcLltBLVpdezIsNH1cYi9pJzsKICAgICAgICAgICAgCSRzdHJpbmcgPSBwcmVnX3JlcGxhY2UoJHN1Y2htdXN0ZXIsJycsICRzdHJpbmcpOwoKCQkJaWYgKGZ1bmN0aW9uX2V4aXN0cygnbWJfc3RydG9sb3dlcicpKXsKCQkJCWlmIChtYl9kZXRlY3RfZW5jb2RpbmcoJHNlYXJjaCwgJ1VURi04JywgdHJ1ZSkgIT09IGZhbHNlKSB7IC8vbnVyIHNvIGbDvHIgUEhQIDcKCQkJCQkkc3RyaW5nbG93ID0gbWJfc3RydG9sb3dlcigkc3RyaW5nLCdVVEYtOCcpOwoJCQkJCSRzZWFyY2hsb3cgPSBtYl9zdHJ0b2xvd2VyKCRzZWFyY2gsJ1VURi04Jyk7CgkJCQl9IGVsc2UgewoJCQkJCSRzdHJpbmdsb3cgPSBzdHJ0b2xvd2VyKCRzdHJpbmcpOwoJCQkJCSRzZWFyY2hsb3cgPSBzdHJ0b2xvd2VyKCRzZWFyY2gpOwkKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCSRzdHJpbmdsb3cgPSBzdHJ0b2xvd2VyKCRzdHJpbmcpOwoJCQkJJHNlYXJjaGxvdyA9IHN0cnRvbG93ZXIoJHNlYXJjaCk7CgkJCX0KCQkJCgoJCQkvLyB3ZWlsIHN0cnRvbG93ZXIgdW50ZXIgUEhQIDUuNCBhbnNjaGVpbmVuZCBuaWNodCBtZWhyIHR1dAoJCQkkdW1sYXV0X2dyb3NzID0gYXJyYXkoJ8OEJywnw5YnLCfDnCcpOwoJCQkkdW1sYXV0X2tsZWluID0gYXJyYXkoJ8OkJywnw7YnLCfDvCcpOwoJCQkkc2VhcmNobG93ID0gc3RyX3JlcGxhY2UoJHVtbGF1dF9ncm9zcywgJHVtbGF1dF9rbGVpbiwgJHNlYXJjaGxvdyk7CgkJCSRzdHJpbmdsb3cgPSBzdHJfcmVwbGFjZSgkdW1sYXV0X2dyb3NzLCAkdW1sYXV0X2tsZWluLCAkc3RyaW5nbG93KTsKCgkJCSMgZGllIHVuZC1WZXJrbnVlcGZ1bmc6CgkJCSRvciA9IGZhbHNlOyAKCgkJCWlmICgoc3RycG9zKCRzZWFyY2hsb3csIiBvciAiKSAhPT0gZmFsc2UgfHwgc3RycG9zKCRzZWFyY2hsb3csIiBvZGVyICIpICE9PSBmYWxzZSkgJiYgIGlzc2V0KCRzdWNodGlwM29yKSAmJiAkYXVzZHJ1Y2sgIT09IHRydWUgKSB7IC8vIFVtc2NoYWx0ZW4gdm9uIHVuZCBhdWYgb3IgCgkJCQkkb3IgPSB0cnVlOwoJCQkJJHNlYXJjaGxvdyA9IHN0cl9yZXBsYWNlKCIgb3IgIiwgIiAiLCAkc2VhcmNobG93KTsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgiIG9kZXIgIiwgIiAiLCAkc2VhcmNobG93KTsKCQkJfQoJCQkJCgkJCSMgV29ydGdydXBwZW4KCQkJaWYgKCRhdXNkcnVjayAhPT0gZmFsc2UpIHsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgnJnF1b3Q7JywnJywkc2VhcmNobG93KTsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgnIicsJycsJHNlYXJjaGxvdyk7CgkJCQkkc2VhcmNoX2FyclswXSA9ICRzZWFyY2hsb3c7CgoJCQl9IGVsc2UgewoJCQkJJHNlYXJjaF9hcnIgPSBleHBsb2RlKCIgIiwkc2VhcmNobG93KTsKCQkJfQoJCQkkc2VhcmNoX2NvdW50ID0gY291bnQoJHNlYXJjaF9hcnIpOwoKCgoJCQkkaT0wOwoJCQlmb3JlYWNoICgkc2VhcmNoX2FyciBhcyAkc2VhcmNoX3dvcmQpIHsKCQkJCWlmIChAc3RycG9zKCRzdHJpbmdsb3csJHNlYXJjaF93b3JkKSAhPT0gZmFsc2UpIHsJIAkvLyB3ZW5uIFN1Y2hiZWdyaWZmIHZvcmtvbW10LCBzY2huZWxsZXIgYWxzIHByZWdfbWF0Y2gJCQkJCgkJCQkJJGkrKzsKCgoJCQkJCWlmICgkb3IgPT09IHRydWUpIHskaSA9ICRzZWFyY2hfY291bnQgPSAxO30gLy8gZGVyIEhhY2ssIHVtIGJlaSBPUiBuaWNodCB6dSB3YXJ0ZW4sIGJpcyBhbGxlIFN1Y2hiZWdyaWZmZSBnZWZ1bmRlbiB3ZXJkZW4KCgkJCQkJaWYgKCRpPT0kc2VhcmNoX2NvdW50KSB7CQkvLyBzb2JhbGQgYWxsZSBTdWNoYmVncmlmZmUgZ2VmdW5kZW4gd3VyZGVuLi4uCgkJCQkJCQoJCQkJCQkkc3RyaW5nbG93ID0gc3RyaXBfdGFncygkc3RyaW5nbG93KTsKCgkJCQkJCSR0ZXN0ID0gQHN1YnN0cl9jb3VudCgkc3RyaW5nbG93LCAkc2VhcmNoX3dvcmQpOwoKCQkJCQkJaWYgKCRzZWFyY2hfY291bnQgPiAxKXsKCQkJCQkJCSRwb3M9c3RycG9zKCRzdHJpbmdsb3csJHNlYXJjaF93b3JkKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCSRwb3M9c3RycG9zKCRzdHJpbmdsb3csJHNlYXJjaGxvdyk7CgkJCQkJCX0KCgoJCQkJCQlpZiAoJHZvciA+PSAkcG9zKSB7CgkJCQkJCQkkcGllY2UxID0gc3Vic3RyKCRzdHJpbmcsMCwkbmFjaCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkkcGllY2UxID0gc3Vic3RyKCRzdHJpbmcsJHBvcy0kdm9yLCR2b3IrJG5hY2gpOwoKCQkJCQkJCSRwaWVjZTEgPSBzdHJzdHIgKCRwaWVjZTEsIiAiKTsgLy8gdmVybWVpZGV0IEJydWNoc3R1ZWNrZSB2b24gV29lcnRlcm4gYW0gQW5mYW5nIGRlcyBLb250ZXh0CgkJCQkJCX0KCgoKCQkJCQkJJHBpZWNlMSA9IHN1YnN0cigkcGllY2UxLCAwLCBzdHJsZW4oc3RycmNocigkcGllY2UxLDMyKSkqKC0xKSkuIiAuLi4iOyAvLyB2ZXJtZWlkZXQgQnJ1Y2hzdHVlY2tlIHZvbiBXb2VydGVybiBhbSBFbmRlIGRlcyBLb250ZXh0CgkJCQkJCSRyZXN0ID0gIjxiciAvPiRwaWVjZTEiOwoKCgoKCQkJCQkJJGZpbGVmb3JzaXplID0gJGZpbGU7CgkJCQkJCWlmICgkc2hvd19leHQgIT09IHRydWUpIHsKCQkJCQkJCSRpbmZvID0gcGF0aGluZm8oJGZpbGUpOwoJCQkJCQkJJGZpbGUgPSAgYmFzZW5hbWUoJGZpbGUsJy4nLiRpbmZvWydleHRlbnNpb24nXSk7CgkJCQkJCX0KCgoJCQkJCQlpZigkdm9yPT0iMCIgJiYgJG5hY2g9PSIwIikgJHJlc3QgPSAiIjsKCgkgICAgICAgICAgICAgICAgICAgIGlmKCEkZGVzY3JpcHRpb24gPT0gIiIgJiYgJHNob3dfZGVzYyA9PSB0cnVlKSAkcmVzdCA9ICI8YnIgLz48c3Ryb25nPiRiZXNjaHJlaWI8L3N0cm9uZz4gJGRlc2NyaXB0aW9uIjsKCQkJCQkJaWYoJGZpbGVuYW1lKSAkdGl0ZWwgPSAkZmlsZTsKCgkJCQkJCWlmIChpc3NldCgkY2hhdmUpICYmICRjaGF2ZSA9PSAiMzIxIil7CgkJCQkJCQkvLyB1bmRvY3VtZW50ZWQ6IG51ciBkaXIgemVpZ2VuCgkJCQkJCQlpZiAoaXNzZXQoJHNob3dfZGlyX29ubHkpICYmICRzaG93X2Rpcl9vbmx5ID09PSB0cnVlKSB7CgkJCQkJCQkJJGxhc3RfZGlyID0gZXhwbG9kZSgnLycsICRkaXIpOwoJCQkJCQkJCSR4ID0gYXJyYXlfa2V5cygkbGFzdF9kaXIpOwoJCQkJCQkJCSRsYXN0X2tleSA9IGVuZCgkeCkgLTE7CgkJCQkJCQkJJHRpdGVsID0gJGxhc3RfZGlyWyRsYXN0X2tleV07CgkJCQkJCQkJJGZpbGU9IiI7CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCWlmKCR0aXRlbCA9PSAiIikgJHRpdGVsID0gJGZpbGU7CgoKCQkJCQkJaWYgKGlzc2V0KCRxdWVyeSkpewoJCQkJCQkJJHFkaXIgPSBzdHJfcmVwbGFjZSgiLi8iLCIiLCRkaXIpOyAvLyBlbnRmZXJudCBkYXMgZnVlaHJlbmRlIC4vIGJlaW0gcXVlcnkgc3RyaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAJaWYgKGlzc2V0KCRxdWVyeV9lbmR1bmcpICYmICRxdWVyeV9lbmR1bmcgPT0gIm5vIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIAkJJGZleHQgID0gYXJyYXlfcG9wKGV4cGxvZGUoJy4nLCAkZmlsZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmbmFtZSA9IGJhc2VuYW1lKCRmaWxlLCAnLicuJGZleHQpOwoJCQkJCQkJICAgICRsaW5rID0gJHF1ZXJ5LiRxZGlyLiRmbmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgCX0gZWxzZSB7CgkJCQkJCQkJJGxpbmsgPSAkcXVlcnkuJHFkaXIuJGZpbGU7CiAgICAgICAgICAgICAgICAgICAgICAgCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkkbGluayA9ICRkaXIuJGZpbGU7CgkJCQkJCX0KCgkJCQkJCWlmIChpc3NldCgkcXVlcnkpKXsKCQkJCQkJCS8vIGlmICgkYXVzZHJ1Y2sgPT09IHRydWUpIHsKCQkJCQkJCS8vIAkkbGluayA9ICRsaW5rLicmcT0lMjInLiRzZWFyY2hsb3c7CgkJCQkJCQkvLyB9IGVsc2UgewoJCQkJCQkJLy8gCSRsaW5rID0gJGxpbmsuIiZxPSIuJHNlYXJjaGxvdzsKCQkJCQkJCS8vIH0KCgkJCQkJCQkkbGluayA9ICRsaW5rLiImcT0iLiRzZWFyY2hsb3c7CgoJCQkJCQl9IGVsc2UgewoJCQkJCQkJLy8gaWYgKCRhdXNkcnVjayA9PT0gdHJ1ZSkgewoJCQkJCQkJLy8gCSRsaW5rID0gJGxpbmsuJz9xPSUyMicuJHNlYXJjaGxvdzsKCQkJCQkJCS8vIH0gZWxzZSB7CgkJCQkJCQkvLyAJJGxpbmsgPSAkbGluay4iP3E9Ii4kc2VhcmNobG93OwoJCQkJCQkJLy8gfQoKCQkJCQkJCSRsaW5rID0gJGxpbmsuIj9xPSIuJHNlYXJjaGxvdzsKCQkJCQkJfQoKCgkJCQkJCQkKCgkJCQkJCWlmICgkX1NFUlZFUlsnU0VSVkVSX05BTUUnXSA9PSAid2ViZGVzaWduLndlaXNzaGFydC5kZSIpIHsKCQkJICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIAkJCS8vIFVtbGVpdGVuIHZvbiBLb21tZW50YXJlbiBhdWYgZGVuIEFydGlrZWw6CiAgICAgICAgICAgICAgICAgIAkJCWlmIChzdHJwb3MoJGxpbmssJ2NvbW1lbnQnKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAgCQkJJHRpdGVsID0gc3RyX3JlcGxhY2UoImNvbW1lbnRfIiwiIiwkdGl0ZWwpOwogICAgICAgICAgICAgICAgICAgICAJCQkkdGl0ZWwgPSBzdHJfcmVwbGFjZSgiLnhtbCIsIi5waHAiLCR0aXRlbCk7CiAgICAgICAgICAgICAgICAgICAgIAkJCSR0aXRlbCA9ICdLb21tZW50YXIgYXVmIGRlciBTZWl0ZSAnLiR0aXRlbDsKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoImNvbW1lbnRfIiwiIiwkbGluayk7CiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoIi54bWwiLCIucGhwIiwkbGluayk7CiAgICAgICAgICAgICAgICAgIAkJCX0KCiAgICAgICAgICAgICAgICAgIAkJCS8vIEpldHp0IFVtbGVpdGVuIHZvbiBtZC1UZXh0ZmlsZXMgYXVmIGRlbiBBcnRpa2VsOgogICAgICAgICAgICAgICAgICAJCQlpZiAoc3RycG9zKCRsaW5rLCcvbWFya2Rvd24vJykgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoIm1hcmtkb3duLyIsIiIsJGxpbmspOwogICAgICAgICAgICAgICAgICAgICAJCQkkbGluayA9IHN0cl9yZXBsYWNlKCJfdGV4dC50eHQiLCIucGhwIiwkbGluayk7CiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoInBiXyIsIiIsJGxpbmspOwoJCQkgICAJCQkJCSR0aXRlbCA9IHN0cl9yZXBsYWNlKCIuLyIsIiIsJGxpbmspOyAKICAgICAgICAgICAgICAgICAgCQkJfQoJCQkJCQl9CgkJCQkJCQoJCQkJCQlpZiAoaXNzZXQoJGNoYXZlKSAmJiAkY2hhdmUgPT0gIjMyMSIpewoJCQkJICAJCQkvLyBVbWxlaXRlbiB2b24gSW5jbHVkZS1EYXRlaWVuOgoJCQkJICAJCQlpZiAoaXNzZXQoJHJlZGlyX3N1ZmZpeCkgJiYgaXNzZXQoJHJlZGlyX3JlcGxhY2UpKSB7CiAgICAgICAgICAgICAgICAgICAgIAkJCSR0aXRlbCA9IHN0cl9yZXBsYWNlKCRyZWRpcl9zdWZmaXgsJHJlZGlyX3JlcGxhY2UsJHRpdGVsKTsKICAgICAgICAgICAgICAgICAgICAgCQkJJGxpbmsgPSBzdHJfcmVwbGFjZSgkcmVkaXJfc3VmZml4LCRyZWRpcl9yZXBsYWNlLCRsaW5rKTsKCQkJCSAgCQkJfQkJCQkKCQkJCQkJfQoJCQkJCQkKCQkJCQkJaWYoJHRpdGVsICE9ICIiKSB7CgkJCQkJCQkKCQkJCQkJCSR0aXRlbCA9IHRyaW0oJHRpdGVsKTsKCgkJCQkJCQlpZiAoJHRhcmdldCA9PSAiYmxhbmsiKSB7CgkJCQkJCQkJJHppZWwgPSAnIHRhcmdldD0iX2JsYW5rIic7CgkJCQkJCQkJJGp1bXAgPSBmYWxzZTsKCQkJCQkJCX0gZWxzZWlmICgkdGFyZ2V0ID09ICJwYXJlbnQiKSB7CgkJCQkJCQkJJHppZWwgPSAnIHRhcmdldD0iX3BhcmVudCInOwoJCQkJCQkJCSRqdW1wID0gZmFsc2U7CgkJCQkJCQl9IGVsc2VpZiAoJHRhcmdldCAhPSAiIikgewoJCQkJCQkJCSR6aWVsID0gJyB0YXJnZXQ9IicuJHRhcmdldC4nIic7CgkJCQkJCQkJJGp1bXAgPSBmYWxzZTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJJHppZWwgPSAnJzsKCQkJCQkJCX0KCgkJCQkJCQkvLyB1bSBkZW4gVVJJLVBhcmFtZXRlciBxPSB6dSB1bnRlcmRyw7xja2VuID0+IGRhbm4gZ2VodCAkdGFyZ2V0d2FobCBuYXTDvHJsaWNoIG5pY2h0IG1laHIsIHdlaWwgbGlua29wZW5lciBpbiBzZWFyY2gucGhwICI/cT0iIGFiZnJhZ3QKCQkJCQkJCWlmIChpc3NldCgkcXVlcnlzdHJpbmcpICYmICRxdWVyeXN0cmluZyA9PT0gdHJ1ZSkgeyRsaW5rID0gc3RyX3JlcGxhY2UoJz9xPScuJHNlYXJjaGxvdywnJywkbGluayk7fQoJCQkJCQkJaWYgKCRwZmFkID09IHRydWUpIHsKCQkJCQkJCQkKCQkJCQkJCQlpZiAoaXNzZXQoJHF1ZXJ5KSl7CgkJICAgICAgICAgICAgICAgICAgICAgICAgCSR1cmwgPSAiIDxhIGhyZWY9XCIiLiRsaW5rLiJcIiIuJHppZWwuIj4iLiRwcm90LiRwZmFkaW5mby4kbGluay4iPC9hPiAiOwoJCQkJCQkJCX0gZWxzZSB7CgoJCQkJCQkJLy8kbGlua19hbnogPSBzdHJfcmVwbGFjZSgnI3dkd19zdWNoZScsJycsJGxpbmspOwoJCQkJCQkJJGxpbmtfYW56ID0gc3RyX3JlcGxhY2UoJyUyMicsJycsJGxpbmspOwoJCQkJCQkJJGxpbmtfYW56ID0gc3RyX3JlcGxhY2UoJz9xPScuJHNlYXJjaGxvdywnJywkbGlua19hbnopOwoJCQkJCQkJJGxpbmtfYW56ID0gc3RyX3JlcGxhY2UoJy4uLycsJy8nLCRsaW5rX2Fueik7CgkJCQkJCQkkbGlua19hbnogPSBzdHJfcmVwbGFjZSgnLi8nLCcvJywkbGlua19hbnopOwoJCQkJCQkJaWYgKHN0cnBvcyAoJGxpbmssJy4uJykgIT09IGZhbHNlKSB7JHBmYWRpbmZvID0gc3RyX3JlcGxhY2UoJHAyLCcnLCRwZmFkaW5mbyk7fQoJCQkJCQkJCQkKCQkJCQkJCS8vICR1cmwgPSAiIDxhIGhyZWY9XCIiLiRsaW5rLiJcIiIuJHppZWwuIj4iLiRwcm90LiRwZmFkaW5mby5zdWJzdHIoJGxpbmssMSkuIjwvYT4gIjsKCQkgICAgICAgICAgICAgICAgICAgICAgICAJJHVybCA9ICIgPGEgaHJlZj1cIiIuJGxpbmsuIlwiIi4kemllbC4iPiIuJHByb3QuJHBmYWRpbmZvLiRsaW5rX2Fuei4iPC9hPiAiOwoJCQkJCQkJCX0KCSAgICAgICAgICAgICAgICAgICAJCX0gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAJCSR1cmwgPSAiIjsKCSAgICAgICAgICAgICAgICAgICAgICAgCX0KCgkgICAgICAgICAgICAgICAgICAgCQlpZiAoJGFlbmRfZGF0ID09IHRydWUpIHsKCQkJCQkJCQlpZiAoJGRhdGVmb3JtID09ICJlbiIpIHsKCQkJCQkJCQkJQCRtb2QgPSAkZmlsZWRhdGUuZGF0ZSgibS9kL3kiLCBmaWxlbXRpbWUoJGRpci4kZmlsZWZvcnNpemUpKTsKCQkJCQkJCQkKCQkJCQkJCQl9IGVsc2VpZiAoJGRhdGVmb3JtID09ICJkZSIgfHwgJGRhdGVmb3JtID09ICIiIHx8ICFpc3NldCgkZGF0ZWZvcm0pKSB7CgkJCQkJCQkJCUAkbW9kID0gJGZpbGVkYXRlLmRhdGUoImQubS55IiwgZmlsZW10aW1lKCRkaXIuJGZpbGVmb3JzaXplKSk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJQCRtb2QgPSAkZmlsZWRhdGUuZGF0ZSgkZGF0ZWZvcm0sIGZpbGVtdGltZSgkZGlyLiRmaWxlZm9yc2l6ZSkpOwoJCQkJCQkJCX0KCQkJCQkJCQkkbW9kID0gIjxzcGFuIGNsYXNzPSdtb2QxJz4iLiRtb2QuIjwvc3Bhbj4iOwoJCQkJCQkJfSBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgCQkkbW9kID0gIiI7CgkgICAgICAgICAgICAgICAgICAgIAl9CgoJCQkJCQkJLy8gZWluIFRodW1iIGVpbmJpbmRlbiwgd2VubiBlaW5lIEdyYWZpay1EYXRlaSBtaXQgZ2xlaWNoZW0gRGF0ZWluYW1lbiBpbSBPcmRuZXIgbGllZ3QKCQkJCQkJCQoJCQkJCQkJJHRodW1iID0gJyc7CgkJCQkJCQlpZiAoaXNzZXQoJGNoYXZlKSAmJiAkY2hhdmUgPT0gIjMyMSIpIHsKCQoJCQkJCQkJCSRleHRlbnNpb25zID0gYXJyYXkoIi5odG0iLCIuaHRtbCIsIi5zaHRtbCIsIi5waHAiLCIucGhwMyIsIi5waHA0IiwiLnBocDUiLCAiLnBkZiIpOwoJCQkJCQkJCSR0aHVtYiA9IHN0cl9yZXBsYWNlKCRleHRlbnNpb25zLCR0aHVtYl9yZXBsYWNlLCRsaW5rKTsKCQkJCQkJCX0KCgkJCQkJCQkkaW1nbGluayA9ICIiOwoJCQkJCQkJCSR0aHVtYiA9IHN0cnRvaygkdGh1bWIsICc/Jyk7CgkJCQkJCQkJaWYgKGZpbGVfZXhpc3RzKCR0aHVtYikgJiYgJHRodW1iICE9ICRsaW5rKSB7CgkJCQkJCQkJCSRpbWdsaW5rID0gJzxhIGhyZWYgPSInLiRsaW5rLiciIGFyaWEtaGlkZGVuPSJ0cnVlIj48aW1nIHNyYz0iJy4kdGh1bWIuJyIgYWx0PSJTeW1ib2wgZGVyIFNlaXRlICIvPjwvYT4nOwoJCQkJCQkJCX0KCgkgICAgICAgICAgICAgICAgCQkkdHJlZmZfYW56PSIiOwoJICAgICAgICAgICAgICAgICAgCQlpZigkdHJlZmZlciAmJiAkdGVzdD49MSkgJHRyZWZmX2Fuej0iPHNwYW4gY2xhc3M9J3RyZWZmZXInPlsiLiR0ZXN0LiImbmJzcDsiLiR0cmVmZi4iXTwvc3Bhbj4iOwoKCQkJCQkvLyBzbyBrYW5uIG1hbiBhbHBoYWJldGlzY2ggc29ydGllcmVuOiAoTmVnZXJ0cmljaykKCQkJCQlpZiAoaXNzZXQoJGFscGhhc29ydCkgJiYgJGFscGhhc29ydCA9PT0gdHJ1ZSkgeyR0ZXN0ID0gJHRpdGVsO30KCgkJCQkJLy8gVHJlZmZlciBiZWkgb3IgbnVyIGVpbm1hbCBhdWZsaXN0ZW4KCQkJCQlpZiAoIWluX2FycmF5KCRsaW5rLCAkYmVyZWl0c19mb3VuZCkpIHsKCQkJCQkJaWYgKCRvciA9PT0gdHJ1ZSkgeyRiZXJlaXRzX2ZvdW5kW10gPSAkbGluazt9IAoKICAgICAgICAgICAgICAgICAgICAgIAkJCWlmICgkcGZhZCB8fCAkYWVuZF9kYXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgCQkJaWYgKCRpZnJhbWUgIT09IHRydWUpIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAJCQkJJGFycmF5IC49ICR0ZXN0LiRpbWdsaW5rLiI8YSBocmVmPVwiIi4kbGluay4iXCIiLiR6aWVsLiI+Ii4kdGl0ZWwuIjwvYT4gIi4kbGlzdF9oeF9lbmQuJHRyZWZmX2Fuei4kcmVzdC4iPHNwYW4gY2xhc3M9J21vZCc+Ii4kdXJsLiI8L3NwYW4+Ii4kbW9kLiJcbiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJCQkkYXJyYXkgLj0gIiRsaW5rXG4iOwogICAgICAgICAgICAgICAgICAgICAgIAkJCQl9CiAgICAgICAgICAgICAgICAgICAgIAkJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIAkJCWlmICgkaWZyYW1lICE9PSB0cnVlKSB7IAogICAgICAgICAgICAgICAgICAgICAgICAgCQkJCSRhcnJheSAuPSAkdGVzdC4kaW1nbGluay4iPGEgaHJlZj1cIiIuJGxpbmsuIlwiIi4kemllbC4iPiIuJHRpdGVsLiI8L2E+ICIuJGxpc3RfaHhfZW5kLiR0cmVmZl9hbnouJHJlc3QuIlxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgCQkJCQkkYXJyYXkgLj0gIiRsaW5rXG4iOwogICAgICAgICAgICAgICAgICAgICAgICAgCQkJfQogICAgICAgICAgICAgICAgICAgICAgICAJCX0KCQkJCQkJJGZvdW5kICsrOwoJCQkJCX0KCgoJICAgICAgICAgICAgICAgCQkJLy8kZm91bmQgKys7CgoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoJfQoJfQoJCglAY2xvc2VkaXIoJHZlcnopOwoKCX0KZWNobyAnPC9wPic7CmlmICgkc2VhcmNoID09ICLCp2ZvdW5kIikge2VjaG8gJyYjODM7dSYjOTk7aCYjMTE1O2MmIzExNDtpJiMxMTI7dCAmIzE2OTsgMiYjNDg7MDUgJiMxMTk7ZSYjOTg7ZCYjMTAxO3MmIzEwNTtnbiYjNDY7JiMxMTllJiMxMDU7cyYjMTE1O2gmIzk3O3ImIzExNjsmIzQ2OyYjMTAwO2UnO2V4aXQ7fQoKCi8vIExvZ2RhdGVpIHNjaHJlaWJlbiB1bmQgQmVuYWNocmljaHRpZ3VuZ3MtTWFpbCBtaXQgaXAgLSBTcGVycmU6CgovLyBpcCBhbm9ueW1pc2llcmVuOgokcmVsb2FkX2lwID0gJF9TRVJWRVJbIlJFTU9URV9BRERSIl07CiRpcF9hcnJheSA9IGV4cGxvZGUoIi4iLCRyZWxvYWRfaXApOwokcmVsb2FkX2lwID0gJGlwX2FycmF5WzBdLiIuIi4kaXBfYXJyYXlbMV0uIi4iLiRpcF9hcnJheVsyXS4iLnh4eCI7CgoKZnVuY3Rpb24gc2NocmVpYmVuKCRkYXRlaSwkbW9kZSl7CglnbG9iYWwgJHNlYXJjaCwgJHJlbG9hZF9pcDsKCSRmcCA9IEBmb3BlbigkZGF0ZWksJG1vZGUpOwoJZndyaXRlKCRmcCwkcmVsb2FkX2lwLiJ8Ii50aW1lKCkuInwiLiRzZWFyY2guIlxuIik7CglmY2xvc2UoJGZwKTsKfQoKCmZ1bmN0aW9uIGlwX3NwZXJyZSgpIHsKCWdsb2JhbCAkc2VhcmNoLCAkcmVsb2FkbGltaXQsICRpbnN0YWxsYXRpb25fcGF0aCwkcmVsb2FkX2lwOwoJJHJlbG9hZGxvZ2RhdGVpID0gJGluc3RhbGxhdGlvbl9wYXRoLicvcmVsb2FkLnR4dCc7CgkkYW56YWhsZWludHJhZWdlID0gMTAwOwoJJGF1c2dhYmUgPSBmYWxzZTsKCgkvLyBQcnVlZmVuLCBvYiByZWxvYWRkYXRlaSBleGlzdGllcnQgPT4gYW5zb25zdGVuIEVyc3RlbGxlbgoKCWlmKCFmaWxlX2V4aXN0cygkcmVsb2FkbG9nZGF0ZWkpKSB7CgkJJGRhdGVpID0gZm9wZW4oJHJlbG9hZGxvZ2RhdGVpLCJ3KyIpOwoJCWZjbG9zZSgkZGF0ZWkpOwoJfQoKCSRmcCA9IGZpbGUoJHJlbG9hZGxvZ2RhdGVpKTsKCSRzaXplID0gc2l6ZW9mKCRmcCk7CgkkYXVzZ2FiZSA9IGZhbHNlOwoJLy8gRGF0ZWkgc2NocmVpYmVuLCB3ZW5uIExpc3RlIHZvbGw6CglpZigkc2l6ZSA+PSAkYW56YWhsZWludHJhZWdlKXsKCQlzY2hyZWliZW4oJHJlbG9hZGxvZ2RhdGVpLCJ3Iik7CgoJLy8gUHJ1ZWZlbiwgb2IgZWluZSBJUCBpbiBkZXIgTGlzdGUgc3RlaHQKCX0gZWxzZSB7CgkJZm9yICgkaT0wOyRpPCRzaXplOyRpKyspIHsKICAgICAgCQkkemVpbGUgPSBleHBsb2RlKCJ8IiwkZnBbJGldKTsKCgoKCgkJCWlmICgkemVpbGVbMV0gPiB0aW1lKCktMyB8fAoJCQkJCQoJCQkkemVpbGVbMF0gPT0gJHJlbG9hZF9pcCAmJiAkemVpbGVbMV0gPiB0aW1lKCktNiB8fAoJCQkkemVpbGVbMF0gPT0gJHJlbG9hZF9pcCAmJiB0cmltKCR6ZWlsZVsyXSkgPT0gJHNlYXJjaCAmJiAkemVpbGVbMV0gPiAodGltZSgpLSRyZWxvYWRsaW1pdCkpIHsgLy8gZ2xlaWNoZSBJUCwgcmVsb2FkbGltaXQgdW5kIGdsZWljaGVyIFN1Y2hiZWdyaWZmCgkJCQkkYXVzZ2FiZSA9IHRydWU7CiAgICAgIAkJfQoJCX0KCQkvLyBQcm90b2tvbGxpZXJ0IGRpZSBJUC1BZHJlc3NlIChzY2hyZWlidCk6CgkJc2NocmVpYmVuKCRyZWxvYWRsb2dkYXRlaSwiYSsiKTsKCX0KCgoJcmV0dXJuIEAkYXVzZ2FiZTsKfQoKLy8gamV0enQgTG9nZmlsZSB1bmQgQmVuYWNocmljaHRpZ3VuZ3MtTWFpbCBzY2hyZWliZW46CgppZihpcF9zcGVycmUoKT09PWZhbHNlKSB7CgoJLy8gQmVuYWNocmljaHRpZ3VuZ3MgTWFpbDoKCWlmIChmdW5jdGlvbl9leGlzdHMoJ21iX3N0cnRvbG93ZXInKSl7CgkJaWYgKG1iX2RldGVjdF9lbmNvZGluZygkc2VhcmNoLCAnVVRGLTgnLCB0cnVlKSAhPT0gZmFsc2UpIHsgLy9udXIgc28gZsO8ciBQSFAgNwoJCQkkc3VjaGJlZ3JpZmZfbWFpbCA9IGh0bWxzcGVjaWFsY2hhcnMoJHNlYXJjaCwgRU5UX05PUVVPVEVTLCAiVVRGLTgiKTsKCQkJJHN1Y2hiZWdyaWZmX2xvZyA9IHV0ZjhfZGVjb2RlKCRzdWNoYmVncmlmZl9tYWlsKTsKCQl9IGVsc2UgewoJCQkkc3VjaGJlZ3JpZmZfbWFpbCA9IGh0bWxzcGVjaWFsY2hhcnMoJHNlYXJjaCwgRU5UX05PUVVPVEVTLCAiSVNPLTg4NTktMTUiKTsKCQkJJHN1Y2hiZWdyaWZmX2xvZyA9ICRzdWNoYmVncmlmZl9tYWlsOwkKCQl9IAoJfSBlbHNlIHsKCQkkc3VjaGJlZ3JpZmZfbWFpbCA9IGh0bWxzcGVjaWFsY2hhcnMoJHNlYXJjaCwgRU5UX05PUVVPVEVTLCAiSVNPLTg4NTktMTUiKTsKCQkkc3VjaGJlZ3JpZmZfbG9nID0gJHN1Y2hiZWdyaWZmX21haWw7Cgl9CgkKCSRoZWFkZXIgPSAnRnJvbTogJy4kYWRtaW5hZGRyZXNzLicnIC4gIlxyXG4iIC4nWC1NYWlsZXI6IFBIUC8nIC4gcGhwdmVyc2lvbigpOwoJCglpZigkbWFpbCA9PSB0cnVlICYmICRzZWFyY2ggIT0gJHZhbHVlKSB7CgkJaWYgKCEkc2VuZGVyKSB7JHNlbmRlciA9ICJTdWNoc2NyaXB0Ijt9CgkJbWFpbCgkYWRtaW5hZGRyZXNzLCJTdWNoZSBhdWYgJHNlaXRlIiwiJHNlbmRlciBcblxuRm9sZ2VuZGVyIEJlZ3JpZmYgd3VyZGUgc29lYmVuIGF1ZiBkZXIgU2VpdGUgJHNlaXRlIGdlc3VjaHQ6IFxuJHN1Y2hiZWdyaWZmX21haWxcblRyZWZmZXI6ICRmb3VuZCIsJGhlYWRlcik7Cgl9CgoJLy8gTG9nZmlsZSBzY2hyZWliZW46CgkkdG9kYXkgPSBkYXRlKCJkLm0uWSBIOmkgIik7CgkkbmwgPSAkdG9kYXkuJHN1Y2hiZWdyaWZmX2xvZy4iKCIuJGZvdW5kLiIpXG4iOwoJJGxpbmVzID0gZmlsZSgkaW5zdGFsbGF0aW9uX3BhdGguJy9zZWFyY2hsb2cudHh0Jyk7CgkkbGluZXMgPSBhcnJheV91bmlxdWUoJGxpbmVzKTsgLy8gRHVwbGlrYXRlIGxvZXNjaGVuCgoJLy8gV2VubiBtZWhyIGFscyAkbWF4bXNnIChkZWZhdWx0OjEwMCkgTG9nZWludHJhZWdlIGFlbHRlc3RlIGxvZXNjaGVuOgoJLy8gJG1heG1zZyA9IDEwMDsKCWlmKGNvdW50KCRsaW5lcykgPiAkbWF4bXNnKSB1bnNldCgkbGluZXNbMF0pOwoKCSRubCA9IGltcGxvZGUoIiIsICRsaW5lcykuJG5sOwoKIAoJJGZwMiA9IGZvcGVuKCRpbnN0YWxsYXRpb25fcGF0aC4nL3NlYXJjaGxvZy50eHQnLCAnd2InKTsKCWZ3cml0ZSgkZnAyLCAkbmwpOwoJZmNsb3NlKCRmcDIpOwp9CgoKCglpZigkZm91bmQgPT0gIjAiKQl7CgkJZWNobyAkbm9yZXN1bHQ7CgkJaWYgKHN0cmxlbigkc2VhcmNoKSA+ICRsZW5ndGggJiYgJHZvcnNjaGxhZyAhPSAiIikgeyAKCgkJCSRzeW4gPSBzdHJfcmVwbGFjZSgnJnF1b3Q7JywnJywkc2VhcmNoKTsKCQkJJHN5biA9IHN0cl9yZXBsYWNlKCciJywnJywkc2VhcmNoKTsKCQkKCQkJaWYgKHN0cnBvcyhzdHJ0b2xvd2VyKCRlbmNvZGluZyksInV0ZiIpIT09IGZhbHNlKSB7CgkJCQkkc3luID0gbWJfc3Vic3RyKHRyaW0oJHN5biksMCwkbGVuZ3RoLCd1dGYtOCcpOwoJCQl9IGVsc2UgewoJCQkJJHN5biA9IHN1YnN0cih0cmltKCRzeW4pLDAsJGxlbmd0aCk7CgkJCX0KCgkJCWVjaG8gIjxwPiR2b3JzY2hsYWcgPGEgaHJlZiA9XCIiLiBiYXNlbmFtZSgkX1NFUlZFUlsnUEhQX1NFTEYnXSkuIj9xPSRzeW4mYW1wO2dlZ2VuPSZhbXA7ZGF0ZT0iLnRpbWUoKS4iXCI+JHN5bjwvYT4uPC9wPiI7CgkJfQoJfQoKCWlmKCRmb3VuZCA9PSAiMSIgJiYgJGp1bXAgPT0gdHJ1ZSAmJiAkX1NFUlZFUlsnUEhQX1NFTEYnXSAhPSBzdWJzdHIoJGxpbmssMSkpCXsgLy9kYXMgU3VjaHNjcmlwdCBzZWxic3QgZGFyZiBuaWNodCBhbmdlc3BydW5nZW4gd2VyZGVuOiBFbmRsb3NzY2hsZWlmZQogIAkJJGxpbmsgPSBzdWJzdHIoJGxpbmssMSk7CS8vZGVuIFB1bmt0IHZvciBkZW0gZGlyIHdlZwoJCSRsaW5rID0gc3RyX3JlcGxhY2UoJz9xPScuJHNlYXJjaGxvdywnJywkbGluayk7CgoJCSRzZWFyY2ggPSBzdHJfcmVwbGFjZSgnJnF1b3Q7JywnIicsJHNlYXJjaCk7IC8vIHdlZ2VuIHNlYXJjaHRlcm0uanMKCQkKCQkvLyBkb3BwZWx0ZSBzbGFzaCB2b3IgRGF0ZWluYW1lbiB1bnRlcmRydWVja2VuCgkJJGRpcm5hbWUgPSBkaXJuYW1lKCRfU0VSVkVSWydQSFBfU0VMRiddKTsKCQlpZigkZGlybmFtZSA9PSAiLyIpICRkaXJuYW1lID0gIiI7CgkJLy8gYmFja3NsYXNoIHZvbiBXaW5kb3dzIFNlcnZlcm4gcmF1czoKCQkkZGlybmFtZSA9IHN0cl9yZXBsYWNlKCJcXCIsIiIsJGRpcm5hbWUpOwoKCgoJCWlmIChpc3NldCgkcXVlcnkpKXsKCQkJaGVhZGVyKCJMb2NhdGlvbjogLy8iLiRfU0VSVkVSWydIVFRQX0hPU1QnXS4kZGlybmFtZS4iLyIuJGxpbmsuIiZxPSIuJHNlYXJjaCk7CgkJfSBlbHNlIHsKCQkJaGVhZGVyKCJMb2NhdGlvbjogLy8iLiRfU0VSVkVSWydIVFRQX0hPU1QnXS4kZGlybmFtZS4kbGluay4iP3E9Ii4kc2VhcmNoKTsKCQl9CgkJZXhpdDsKCgl9CgoJaWYoJGZvdW5kID4gIjEiKSB7CiAgICAgICAgJG4gPSAkcGx1cmFsOyAkZSA9ICJlIjsgJHMgPSAicyI7Cgl9IGVsc2UgewogICAgCSRlID0gJG4gPSAkcyA9ICIiOwoJfQoKCWlmKCRmb3VuZCA+PSAiMSIpIHsKCgkJJGFycmF5ID0gZXhwbG9kZSgiXG4iLCAkYXJyYXkpOwoJCWlmIChpc3NldCgkYWxwaGFzb3J0KSAmJiAkYWxwaGFzb3J0ID09PSB0cnVlKSB7CgkJCXNvcnQoJGFycmF5KTsKCQl9IGVsc2UgewoJCQluYXRzb3J0KCRhcnJheSk7CgkJfQoJCXJlc2V0KCRhcnJheSk7CgkJaWYgKCFpc3NldCgkcmV2ZXJzZXNvcnQpKSB7JGFycmF5ID0gYXJyYXlfcmV2ZXJzZSgkYXJyYXkpO30KCiAgICAgICRpID0gJGFuel9kYXQ7CgoKICAgICAgLy8gYW5zdGVsbGUgZGVyIHdoaWxlIGVpbiBmb3IgU2NobGVpZmUsIHdlbm4gaWNoIHdlaXRlcmUgU2VpdGVuIGFuemVpZ2VuIHdpbGw6CiAgICAgICRuZXh0PTA7CiAgICAgIGlmKGlzc2V0KCRfR0VUWyJuZXh0Il0pIHx8IGlzc2V0KCRfUE9TVFsibmV4dCJdKSkgewogICAgICAgICAgICBpZiAoaXNzZXQoJF9HRVRbIm5leHQiXSkgJiYgJF9HRVRbIm5leHQiXSAhPSAiIikgJG5leHQgPSAkX0dFVFsibmV4dCJdOwogICAgICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyJuZXh0Il0pICYmICRfUE9TVFsibmV4dCJdICE9ICIiKSAkbmV4dCA9ICRfUE9TVFsibmV4dCJdOwogICAgICB9CiAgICAgIAogICAgICAkbmV4dDE9JG5leHQrMTsKICAgICAgJHdlaXRlcj0kbmV4dCskYW56X2RhdDsKICAgICAgZm9yKCRjb3VudCA9IDAgKyAkbmV4dDsgJGNvdW50IDwgJGFuel9kYXQgKyAkbmV4dDsgJGNvdW50KyspIHsKICAgICAgICAgaWYgKCRpZnJhbWUgIT09IHRydWUpIHsgCgoKICAgICAgICAgICAgaWYgKEAkYXJyYXlbJGNvdW50XSkgJGF1c2dhYmUgLj0gIjxsaT4iLiRsaXN0X2h4X3N0YXJ0LnN1YnN0cihzdHJzdHIoJGFycmF5WyRjb3VudF0sICc8YSBocmVmJyksMCkuIjwvbGk+XG4iOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoQCRhcnJheVskY291bnRdKSAkYXVzZ2FiZSAuPSAiPGlmcmFtZSBjbGFzcz0nc2VhcmNoaWZyYW1lJyBzcmM9JyIuJGFycmF5WyRjb3VudF0uIic+PC9pZnJhbWU+XG4iOwogICAgICAgICB9CgkKICAgICAgfQoJCgkKCWlmICghaXNzZXQoJGZvdW5kdHh0MSkpeyRmb3VuZHR4dDEgPSAiSWhyIFN1Y2hiZWdyaWZmIHd1cmRlICI7fQoJaWYgKCFpc3NldCgkZm91bmR0eHQyKSl7JGZvdW5kdHh0MiA9ICJTZWl0ZSI7fQoJaWYgKCFpc3NldCgkZm91bmR0eHQzKSl7JGZvdW5kdHh0MyA9ICIgZ2VmdW5kZW4uIjt9CgkkbGVlciA9ICIgIjsKCWlmICgkZm91bmR0eHQzID09IiIpIHskbGVlciA9ICIiO30KCgkJZWNobyAnPHA+Jy4kZm91bmR0eHQxLic8c3Ryb25nPiAnLiRmb3VuZC4nIDwvc3Ryb25nPicuJGZvdW5kdHh0Mi4kbi4kbGVlci4kZm91bmR0eHQzOwoKICAgICAgaWYgKCRuZXh0ID09IDApIHsKICAgICAgICAgICAgaWYgKCRhbnpfZGF0IDwgJGZvdW5kKSB7CiAgICAgIAkJCWlmIChpc3NldCgkYW5nZXplaWd0dHh0KSl7CiAgICAgICAgIAkJCQllY2hvICRhbmdlemVpZ3R0eHQ7CiAgICAgIAkJCX0gZWxzZSB7CiAgICAgICAgIAkJCQllY2hvICI8YnIgLz5BbmdlemVpZ3Qgd2VyZGVuIDxzdHJvbmc+JGFuel9kYXQ8L3N0cm9uZz4gRXJnZWJuaXNzZSBwcm8gU2VpdGUiOwogICAgICAJCQl9CiAgICAgIAkJfQoKLy8gICAgICAJCWlmKCR0cmVmZmVyICYmICRmb3VuZCA+IDEgJiYgJG9yID09PSBmYWxzZSkgeyAKCSAgICAgIAlpZigkdHJlZmZlciAmJiAkZm91bmQgPiAxKSB7IAogICAgICAJCQlpZiAoaXNzZXQoJHNvcnR0eHQpKXsKICAgICAgCQkJCSRzb3J0aGlud2VpcyA9ICRzb3J0dHh0OwogICAgICAJCQl9IGVsc2UgewogICAgICAJCQkJJHNvcnRoaW53ZWlzID0gIiwgc29ydGllcnQgbmFjaCBbQW56YWhsJm5ic3A7ZGVyJm5ic3A7VHJlZmZlciZuYnNwO3BybyZuYnNwO0Rva3VtZW50XSI7CiAgICAgIAkJCX0KICAgICAgCQl9IAoJCQllY2hvICIkc29ydGhpbndlaXMuIjsKICAgICAgfQogICAgICBlY2hvICI8L3A+IjsKCi8vIE5ldWVzIEZlbnN0ZXIKaWYgKCR0YXJnZXQgPT0gIiIgJiYgJHRhcmdldHdhaGwgPT0gdHJ1ZSkgewplY2hvJwo8c2NyaXB0PgovKiA8IVtDREFUQVsgKi8KaWYoZG9jdW1lbnQuY29va2llLmluZGV4T2YoXCdzdWNob2VmZm5lblwnKSAhPT0gLTEpewogICBhZGRFdmVudCh3aW5kb3csIFwnbG9hZFwnLCBsaW5rb3BlbmVyKTsKICAgZG9jdW1lbnQud3JpdGUgKFwnPGZvcm0gYWN0aW9uPSIiPjxwIGNsYXNzPSJsaW5rb3BlbmVyIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJsaW5rY29va2llKCkiIG9uY2xpY2s9ImxpbmtvcGVuZXIodGhpcy5jaGVja2VkKSIgaWQ9ImxpbmtzbmV3d2luMSIgLz4gPGxhYmVsIGZvcj0ibGlua3NuZXd3aW4xIj5UcmVmZmVyIGluIG5ldWVtIEZlbnN0ZXIgJm91bWw7ZmZuZW4/IDxcL2xhYmVsPjxcL3A+PFwvZm9ybT5cJyk7Cn0gZWxzZSB7CiAgIGRvY3VtZW50LndyaXRlIChcJzxmb3JtIGFjdGlvbj0iIj48cCBjbGFzcz0ibGlua29wZW5lciI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0ibGlua2Nvb2tpZSgpIiBvbmNsaWNrPSJsaW5rb3BlbmVyKHRoaXMuY2hlY2tlZCkiIGlkPSJsaW5rc25ld3dpbjEiIC8+IDxsYWJlbCBmb3I9ImxpbmtzbmV3d2luMSI+VHJlZmZlciBpbiBuZXVlbSBGZW5zdGVyICZvdW1sO2ZmbmVuPyA8XC9sYWJlbD48XC9wPjxcL2Zvcm0+XCcpOwp9Ci8qIF1dPiAqLwo8L3NjcmlwdD4KJzsKfQoKICAgICAgICAgICAgJGxpc3RfYXJ0PSJ1bCI7CiAgICAgICAgICAgIGlmICgkbnVtX2xpc3QpJGxpc3RfYXJ0PSJvbCBzdGFydD0kbmV4dCI7CgogICAgICAgICAgICAvLyB1bSBYTUwgRmVobGVyIChIVE1MIFRpZHkgV2FybnVuZ2VuKSB6dSB1bnRlcmJpbmRlbjoKICAgICAgICAgICAgLy8gaHR0cDovL3d3dy50aW1yZWV2ZXMuZGUvbmV1L3dlYmRlc2lnbi93ZWItMjAucGhwCiAgICAgICAgICAgICRzdWNobXVzdGVyID0gJy8mKD8hKFthLXpBLVpdezIsN318I1xkK3wjeFswLTlhLWZBLUZdKyk7KS9pJzsKICAgICAgICAgICAgJGVyc2V0enVuZyA9ICcmYW1wOyc7CiAgICAgICAgICAgICRhdXNnYWJlID0gcHJlZ19yZXBsYWNlKCRzdWNobXVzdGVyLCAkZXJzZXR6dW5nLCAkYXVzZ2FiZSk7CgogICAgICAgICAgICBpZiAoJGlmcmFtZSAhPT0gdHJ1ZSkgeyAKICAgICAgICAgICAgICAgaWYgKCRudW1fbGlzdCkgewogICAgICAgICAgICAgICAgICBlY2hvICJcbjxvbCBzdGFydD0nIi4kbmV4dDEuIic+XG4iLiRhdXNnYWJlLiI8L29sPlxuIjsKICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZWNobyAiXG48dWw+XG4iLiRhdXNnYWJlLiI8L3VsPlxuIjsKICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICBlY2hvICJcbiIuJGF1c2dhYmUuIlxuIjsKICAgICAgICAgICAgfQoKLy8gICAgICBpZiAoJG5leHQgPCAoJGZvdW5kIC0gJGFuel9kYXQpKSB7CiAgICAgIAogICAgICAgICBpZiAoJG1ldGhvZCA9PSAiR0VUIikgewogICAgICAgICAgICAvL25leHQgcmF1cywgd2VpbHMgc29uc3QgeC1tYWwgYW5nZWhhZW5ndCB3aXJkOgogICAgICAgICAgICAkcXVlcnlzdHJpbmcgPSAiIjsKICAgICAgICAgICAgaWYoaXNzZXQoJF9TRVJWRVJbIlFVRVJZX1NUUklORyJdKSkgeyAKICAgICAgICAgICAgICAgJHF1ZXJ5c3RyaW5nID0gJF9TRVJWRVJbIlFVRVJZX1NUUklORyJdOyAKICAgICAgICAgICAgICAgJGZpcnN0cXVlcnkgPSBzdHJwb3MoJHF1ZXJ5c3RyaW5nLCImbmV4dCIpOwogICAgICAgICAgICAgICBpZiAoJGZpcnN0cXVlcnkgIT09IGZhbHNlKSB7IAogICAgICAgICAgICAgICAgICAkcXVlcnlzdHJpbmcgPSBzdWJzdHIoJHF1ZXJ5c3RyaW5nLDAsJGZpcnN0cXVlcnkpOyAKICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgkJCQoJCQkkcHJldmlvdXMgPSAkd2VpdGVyIC0gKCRhbnpfZGF0ICogMik7IAoJCQkKICAgICAgICAgICAgJHF1ZXJ5c3RyaW5nID0gc3RyX3JlcGxhY2UoIiYiLCImYW1wOyIsJHF1ZXJ5c3RyaW5nKTsKICAgICAgICAgICAgCgkJCWVjaG8gJzxwIGNsYXNzPSJ3ZWl0ZXIiPic7CgkJCQoJCQlpZiAoJG5leHQgPj0gJGFuel9kYXQpIHsgCgkJCQllY2hvICc8YSBocmVmPSInLmJhc2VuYW1lKCRfU0VSVkVSWyJQSFBfU0VMRiJdKS4nPycuJHF1ZXJ5c3RyaW5nLicmYW1wO25leHQ9Jy4kcHJldmlvdXMuJyI+Jy4kenVydWVja3R4dC4nPC9hPic7CgkJCQkvLyBlY2hvICc8c2NyaXB0PmRvY3VtZW50LndyaXRlICgiPGEgaHJlZj1cImphdmFzY3JpcHQ6aGlzdG9yeS5iYWNrKClcIj4nLiR6dXJ1ZWNrdHh0Lic8L2E+Iik8L3NjcmlwdD4nOwoJCQl9CgkJCQoJCQlpZiAoJG5leHQgPj0gJGFuel9kYXQgJiYgJG5leHQgPCAoJGZvdW5kIC0gJGFuel9kYXQpKSB7CgkJCQllY2hvICcgfCAnOwoJCQkJLy8gZWNobyAnPHNjcmlwdD5kb2N1bWVudC53cml0ZSAoIiB8ICIpPC9zY3JpcHQ+JzsKCQkJfQoJCQkKCQkJaWYgKCRuZXh0IDwgKCRmb3VuZCAtICRhbnpfZGF0KSkgewoJCQkJZWNobyAnPGEgaHJlZj0iJy5iYXNlbmFtZSgkX1NFUlZFUlsiUEhQX1NFTEYiXSkuJz8nLiRxdWVyeXN0cmluZy4nJmFtcDtuZXh0PScuJHdlaXRlci4nIj4nLiR3ZWl0ZXJ0eHQuJzwvYT4nOwoJCQl9CgkJCWVjaG8nPC9wPic7CiAgICAgICAgIH0KLy8gICAgICB9Cgl9Cn0KZWxzZSB7ZWNobyAkbWlubGVuZ3RoO30KfQoKaWYoJGZvdW5kID49ICIxIiB8fCAhaXNzZXQoJF9HRVRbInEiXSkgKSB7CgkkdWxzdGFydCA9ICIkc2VhcmNodGlwMDxkaXYgaWQ9J3N1Y2h0aXBwcycgIGNsYXNzPSdrbGFwcGVuJyA+XG48dWw+XG4iOwp9IGVsc2UgewoJJHVsc3RhcnQgPSAiJHNlYXJjaHRpcDA8ZGl2IGlkPSdzdWNodGlwcHMnID5cbjx1bD5cbiI7CQp9CgokdWxlbmQgPSAiPC91bD5cbjwvZGl2PlxuIjsKCmlmICgkdGlwcHMpIHskc2VhcmNodGlwID0gJHVsc3RhcnQuJHNlYXJjaHRpcDEuJHNlYXJjaHRpcDIuJHNlYXJjaHRpcDMuJHNlYXJjaHRpcDMxLiRzZWFyY2h0aXAzb3IuJHNlYXJjaHRpcDQuJHVsZW5kOyB9ZWxzZSB7JHNlYXJjaHRpcCA9IiI7fQoKCmVjaG8gJHNlYXJjaHRpcDsKCiRtdGltZSA9IG1pY3JvdGltZSgpOyAkbXRpbWUgPSBleHBsb2RlKCAnICcsICRtdGltZSk7ICRtdGltZSA9ICRtdGltZVsxXSArICRtdGltZVswXTsKJHN1Y2hfZW5kZSA9ICRtdGltZTsKJHRpbWVfZ2VzYW10ID0gJHN1Y2hfZW5kZSAtICRzdWNoX3N0YXJ0OwoKZWNobyAiPGRpdiBpZD1cInNlYXJjaGZvb3RlclwiPjxwPiI7CgppZiAoaXNzZXQoJGFuemFobGRhdCkpewoJJHpkYXQgPSAkYW56YWhsZGF0OwoJfSBlbHNlIHsKCSR6ZGF0ID0gIkFuemFobCBkdXJjaHN1Y2h0ZXIgRGF0ZWllbjogIjsKfQoKaWYgKCR6YWhsemVpZyAmJiAkZm91bmQgPiAwKSBlY2hvICR6ZGF0LiRkdXJjaHN1Y2h0LiI8YnIgLz4iOwoKaWYgKCRmb3VuZCA+IDAgKSB7CglpZiAoaXNzZXQoJHRpbWV0eHQpKXsKCQkkdGltZWhpbndlaXMgPSAkdGltZXR4dDsKCX0gZWxzZSB7CgkJJHRpbWVoaW53ZWlzID0gIlN1Y2hlIGF1c2dlZiZ1dW1sO2hydCBpbiAiOwoJfQoKCWlmKCRkYXVlcikgewoJICAgICAgZWNobyAiJHRpbWVoaW53ZWlzIi5udW1iZXJfZm9ybWF0KCR0aW1lX2dlc2FtdCwyLCcsJywnLicpLiIgJHN1Y2hkYXVlciAkdmVyc2lvblxuIjsKCX0gZWxzZSB7CgkgICAgICBlY2hvICJcbiR2ZXJzaW9uXG4iOwoJfQp9IGVsc2UgewogICAgICBlY2hvICJcbiR2ZXJzaW9uXG4iOwp9CmVjaG8gIjwvcD48L2Rpdj4iOwplY2hvICR3ZHc7Cg==";@eval(base64_decode($NCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQNCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQ));

?>